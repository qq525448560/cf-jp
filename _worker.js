const F=d;(function(e,f){const C=d,g=e();while(!![]){try{const h=parseInt(C(0x139))/(-0x28e*0xb+-0x196a+-0x1*-0x3585)+-parseInt(C(0x117))/(-0xe*-0x1a3+0x941*-0x1+-0x5*0x2bb)*(parseInt(C(0x13f))/(-0x7f0+-0x61+0x854))+-parseInt(C(0x130))/(-0x11a8+-0xd0b+-0x1*-0x1eb7)+parseInt(C(0x146))/(0x1e07+0x41b*0x2+-0x8*0x4c7)+parseInt(C(0x138))/(0x1da1+0x3e*0x86+0x3e0f*-0x1)+-parseInt(C(0x125))/(0xa73+-0x11d7*-0x2+-0x34b*0xe)*(parseInt(C(0x135))/(-0x493*0x2+-0x34e+0x2*0x63e))+parseInt(C(0x12c))/(-0x218a+-0x2046*-0x1+0x6f*0x3);if(h===f)break;else g['push'](g['shift']());}catch(i){g['push'](g['shift']());}}}(c,0x86e*0xa+-0xeb*0x1f3+0x3dc6f));const b=(function(){let e=!![];return function(f,g){const h=e?function(){const D=d;if(g){const i=g[D(0x13c)](f,arguments);return g=null,i;}}:function(){};return e=![],h;};}()),a=b(this,function(){const E=d;return a['toString']()[E(0x171)](E(0x133))[E(0x16d)]()[E(0x166)](a)['search']('(((.+)+)+)+$');});function c(){const ab=['GET','websocket','includes','e258977b-e413-4718-a3af-02d75492c349','finally','cf.zhetengsha.eu.org','forEach','filter','cfip.cfcdn.vip','cdn.2020111.xyz','https://raw.githubusercontent.com/qwer-search/bestip/refs/heads/main/kejilandbestip.txt','push','f3058171cad.002404.xyz','get','访问被拒绝','join','error','pathname','cdn.tzpro.xyz','closed','constructor','trim','vless://00000000-0000-0000-0000-000000000000@127.0.0.1:80?encryption=none&security=none&type=ws&host=error.com&path=%2F#','xn--b6gac.eu.org','regionCode','Initial\x20connection\x20failed,\x20trying\x20fallback:','send','toString','WS\x20Stream\x20Error:','close','byteLength','search','arrayBuffer','tls','://','Upgrade','text/plain;\x20charset=utf-8','cfip.1323123.xyz','/sub','cf.877771.xyz','Not\x20Found','replace','application/json;\x20charset=utf-8','Y29tbWFuZCBpcyBub3Qgc3VwcG9ydGVk','aW52YWxpZCBhZGRyZXNzVHlwZQ==','releaseLock','accept','slice','text/html;\x20charset=utf-8','getUint16','当前\x20Worker\x20已启用自定义路径模式，UUID\x20访问已禁用','method','cname.xirancdn.us','\x22;\x0afunction\x20tryOpenApp(schemeUrl,fallbackCallback,timeout){\x0atimeout=timeout||2500;\x0avar\x20appOpened=false;\x0avar\x20callbackExecuted=false;\x0avar\x20startTime=Date.now();\x0avar\x20blurHandler=function(){\x0avar\x20elapsed=Date.now()-startTime;\x0aif(elapsed<3000&&!callbackExecuted){appOpened=true;}\x0a};\x0awindow.addEventListener(\x27blur\x27,blurHandler);\x0avar\x20hiddenHandler=function(){\x0avar\x20elapsed=Date.now()-startTime;\x0aif(elapsed<3000&&!callbackExecuted){appOpened=true;}\x0a};\x0adocument.addEventListener(\x27visibilitychange\x27,hiddenHandler);\x0avar\x20iframe=document.createElement(\x27iframe\x27);\x0aiframe.style.display=\x27none\x27;\x0aiframe.style.width=\x271px\x27;\x0aiframe.style.height=\x271px\x27;\x0aiframe.src=schemeUrl;\x0adocument.body.appendChild(iframe);\x0asetTimeout(function(){\x0aif(iframe.parentNode)iframe.parentNode.removeChild(iframe);\x0awindow.removeEventListener(\x27blur\x27,blurHandler);\x0adocument.removeEventListener(\x27visibilitychange\x27,hiddenHandler);\x0aif(!callbackExecuted){\x0acallbackExecuted=true;\x0aif(!appOpened&&fallbackCallback)fallbackCallback();\x0a}\x0a},timeout);\x0a}\x0afunction\x20generateClientLink(clientType,clientName){\x0avar\x20currentUrl=window.location.href;\x0avar\x20subscriptionUrl=currentUrl+\x22/sub\x22;\x0avar\x20schemeUrl=\x27\x27;\x0avar\x20displayName=clientName||\x27\x27;\x0avar\x20finalUrl=subscriptionUrl;\x0aif(clientType===\x27v2ray\x27){\x0afinalUrl=subscriptionUrl;\x0adocument.getElementById(\x22clientSubscriptionUrl\x22).textContent=finalUrl;\x0adocument.getElementById(\x22clientSubscriptionUrl\x22).style.display=\x22block\x22;\x0aif(clientName===\x27V2RAY\x27){\x0anavigator.clipboard.writeText(finalUrl).then(function(){alert(displayName+\x22\x20订阅链接已复制\x22);});\x0a}else\x20if(clientName===\x27Shadowrocket\x27){\x0aschemeUrl=\x27shadowrocket://add/\x27+encodeURIComponent(finalUrl);\x0atryOpenApp(schemeUrl,function(){\x0anavigator.clipboard.writeText(finalUrl).then(function(){alert(displayName+\x22\x20订阅链接已复制\x22);});\x0a});\x0a}else\x20if(clientName===\x27V2RAYNG\x27){\x0aschemeUrl=\x27v2rayng://install?url=\x27+encodeURIComponent(finalUrl);\x0atryOpenApp(schemeUrl,function(){\x0anavigator.clipboard.writeText(finalUrl).then(function(){alert(displayName+\x22\x20订阅链接已复制\x22);});\x0a});\x0a}else\x20if(clientName===\x27NEKORAY\x27){\x0aschemeUrl=\x27nekoray://install-config?url=\x27+encodeURIComponent(finalUrl);\x0atryOpenApp(schemeUrl,function(){\x0anavigator.clipboard.writeText(finalUrl).then(function(){alert(displayName+\x22\x20订阅链接已复制\x22);});\x0a});\x0a}\x0a}else{\x0avar\x20encodedUrl=encodeURIComponent(subscriptionUrl);\x0afinalUrl=SUB_CONVERTER_URL+\x22?target=\x22+clientType+\x22&url=\x22+encodedUrl+\x22&insert=false\x22;\x0adocument.getElementById(\x22clientSubscriptionUrl\x22).textContent=finalUrl;\x0adocument.getElementById(\x22clientSubscriptionUrl\x22).style.display=\x22block\x22;\x0aif(clientType===\x27clash\x27){\x0aif(clientName===\x27STASH\x27){\x0aschemeUrl=\x27stash://install?url=\x27+encodeURIComponent(finalUrl);\x0adisplayName=\x27STASH\x27;\x0a}else{\x0aschemeUrl=\x27clash://install-config?url=\x27+encodeURIComponent(finalUrl);\x0adisplayName=\x27CLASH\x27;\x0a}\x0a}else\x20if(clientType===\x27surge\x27){\x0aschemeUrl=\x27surge:///install-config?url=\x27+encodeURIComponent(finalUrl);\x0adisplayName=\x27SURGE\x27;\x0a}else\x20if(clientType===\x27singbox\x27){\x0aschemeUrl=\x27sing-box://install-config?url=\x27+encodeURIComponent(finalUrl);\x0adisplayName=\x27SING-BOX\x27;\x0a}else\x20if(clientType===\x27loon\x27){\x0aschemeUrl=\x27loon://install?url=\x27+encodeURIComponent(finalUrl);\x0adisplayName=\x27LOON\x27;\x0a}else\x20if(clientType===\x27quanx\x27){\x0aschemeUrl=\x27quantumult-x://install-config?url=\x27+encodeURIComponent(finalUrl);\x0adisplayName=\x27QUANTUMULT\x20X\x27;\x0a}\x0aif(schemeUrl){\x0atryOpenApp(schemeUrl,function(){\x0anavigator.clipboard.writeText(finalUrl).then(function(){alert(displayName+\x22\x20订阅链接已复制\x22);});\x0a});\x0a}else{\x0anavigator.clipboard.writeText(finalUrl).then(function(){alert(displayName+\x22\x20订阅链接已复制\x22);});\x0a}\x0a}\x0a}\x0afunction\x20getBase64Subscription(){\x0avar\x20currentUrl=window.location.href;\x0avar\x20subscriptionUrl=currentUrl+\x22/sub\x22;\x0afetch(subscriptionUrl).then(function(response){return\x20response.text();}).then(function(base64Content){\x0adocument.getElementById(\x22base64SubscriptionUrl\x22).textContent=base64Content;\x0adocument.getElementById(\x22base64SubscriptionUrl\x22).style.display=\x22block\x22;\x0anavigator.clipboard.writeText(base64Content).then(function(){alert(\x22Base64订阅内容已复制\x22);});\x0a}).catch(function(error){alert(\x22获取订阅失败，请重试\x22);});\x0a}\x0a</script>\x0a</body>\x0a</html>','pipeTo','addEventListener','原生地址','write','charCodeAt','stringify','443','jp.x9527.xyz','toUpperCase','cf.zerone-cdn.pp.ua','socket','8.8.4.4','172zDRfQc','message','port','cf.090227.xyz','writable','toLowerCase','from','115155.xyz','length','headers','substring','d2ViU29ja2V0LmVhZHlTdGF0ZSBpcyBub3Qgb3Blbg==','speed.marisalnc.com','name','12019NOcTkp','VURQIHByb3h5IG9ubHkgZW5hYmxlIGZvciBETlMgd2hpY2ggaXMgcG9ydCA1Mw==','aW52YWxpZCB1c2Vy','endsWith','no-store,\x20no-cache,\x20must-revalidate,\x20max-age=0','cf.0sm.com','match','4679046QytwYo','enqueue','values','cloudflare.9jy.cc','1097016MVdzsc','readyState','sec-websocket-protocol','(((.+)+)+)+$','split','1376aslRHK','decode','log','794676ORkeCu','129957VNfkmI','bm8gYWNjZXB0YWJsZSBtZXRob2Rz','UUID错误','apply','startsWith','randomized','4023uyigqw','data','c29ja3Mgc2VydmVyIG5lZWRzIGF1dGg=','cloudflare.182682.xyz','catch','/?ed=2048','buffer','299805BVDlgl','getWriter','url','Stream\x20connection\x20error:','isp','test','-WS-TLS','cnamefuckxxs.yuchen.icu','Readable\x20aborted:','cloudflare-ip.mofashi.ltd','map','domain'];c=function(){return ab;};return c();}a();import{connect}from'cloudflare:sockets';const authToken=F(0x155);let fallbackAddress='',fallbackPort=F(0x111);const socks5Config='',manualWorkerRegion='',customPath='',githubPreferredURL=F(0x15c),enableGitHubPreferred=!![],enableOtherPreferred=!![],apiBaseUrl='https://url.v1.mk/sub',directDomains=[{'name':F(0x142),'domain':F(0x142)},{'name':F(0x123),'domain':F(0x123)},{'domain':'freeyx.cloudflare88.eu.org'},{'domain':'bestcf.top'},{'domain':F(0x15b)},{'domain':F(0x15a)},{'domain':F(0x12a)},{'domain':F(0x11a)},{'domain':F(0x157)},{'domain':F(0x12f)},{'domain':F(0x114)},{'domain':F(0x177)},{'domain':F(0x14d)},{'domain':F(0x14f)},{'domain':F(0x11e)},{'domain':F(0x109)},{'domain':F(0x15e)},{'domain':'8.889288.xyz'},{'domain':F(0x164)},{'domain':F(0x179)},{'domain':F(0x169)}],parsedSocks5Config={},isSocksEnabled=![];let enableRegionMatching=!![],currentWorkerRegion='';const backupIPs=[{'domain':'jp.x9527.xyz','region':'US','regionCode':'US','port':0x1bb},{'domain':F(0x112),'region':'SG','regionCode':'SG','port':0x1bb},{'domain':F(0x112),'region':'JP','regionCode':'JP','port':0x1bb},{'domain':F(0x112),'region':'HK','regionCode':'HK','port':0x1bb},{'domain':F(0x112),'region':'KR','regionCode':'KR','port':0x1bb},{'domain':F(0x112),'region':'DE','regionCode':'DE','port':0x1bb},{'domain':F(0x112),'region':'SE','regionCode':'SE','port':0x1bb},{'domain':F(0x112),'region':'NL','regionCode':'NL','port':0x1bb},{'domain':F(0x112),'region':'FI','regionCode':'FI','port':0x1bb},{'domain':F(0x112),'region':'GB','regionCode':'GB','port':0x1bb}],E_INVALID_DATA=atob('aW52YWxpZCBkYXRh'),E_INVALID_USER=atob(F(0x127)),E_UNSUPPORTED_CMD=atob(F(0x17d)),E_UDP_DNS_ONLY=atob(F(0x126)),E_INVALID_ADDR_TYPE=atob(F(0x17e)),E_EMPTY_ADDR=atob('YWRkcmVzc1ZhbHVlIGlzIGVtcHR5'),E_WS_NOT_OPEN=atob(F(0x122)),E_INVALID_ID_STR=atob('U3RyaW5naWZpZWQgaWRlbnRpZmllciBpcyBpbnZhbGlk'),E_INVALID_SOCKS_ADDR=atob('SW52YWxpZCBTT0NLUyBhZGRyZXNzIGZvcm1hdA=='),E_SOCKS_NO_METHOD=atob(F(0x13a)),E_SOCKS_AUTH_NEEDED=atob(F(0x141)),E_SOCKS_AUTH_FAIL=atob('ZmFpbCB0byBhdXRoIHNvY2tzIHNlcnZlcg=='),E_SOCKS_CONN_FAIL=atob('ZmFpbCB0byBvcGVuIHNvY2tzIGNvbm5lY3Rpb24='),ADDRESS_TYPE_IPV4=-0xb51*0x2+-0x2276+0x2f*0x137,ADDRESS_TYPE_URL=-0x1*0x1fcd+0x1d*-0x2+0x3b*0x8b,ADDRESS_TYPE_IPV6=-0x1*-0x409+0x6e9*0x1+0x3a5*-0x3;async function detectWorkerRegion(e){try{const f=e['cf']?.['country'];if(f){const g={'US':'US','SG':'SG','JP':'JP','HK':'HK','KR':'KR','DE':'DE','SE':'SE','NL':'NL','FI':'FI','GB':'GB','CN':'HK','TW':'HK','AU':'SG','CA':'US','FR':'DE','IT':'DE','ES':'DE','CH':'DE','AT':'DE','BE':'NL','DK':'SE','NO':'SE','IE':'GB'};if(g[f])return g[f];}return'HK';}catch(h){return'HK';}}function getNearbyRegions(e){const f={'US':['SG','JP','HK','KR'],'SG':['JP','HK','KR','US'],'JP':['SG','HK','KR','US'],'HK':['SG','JP','KR','US'],'KR':['JP','HK','SG','US'],'DE':['NL','GB','SE','FI'],'SE':['DE','NL','FI','GB'],'NL':['DE','GB','SE','FI'],'FI':['SE','DE','NL','GB'],'GB':['DE','NL','SE','FI']};return f[e]||[];}function getAllRegionsByPriority(e){const G=F,f=getNearbyRegions(e),g=['US','SG','JP','HK','KR','DE','SE','NL','FI','GB'];return[e,...f,...g[G(0x159)](h=>h!==e&&!f[G(0x154)](h))];}function d(a,b){const e=c();return d=function(f,g){f=f-(0xa*0x171+0x359*-0x1+0x359*-0x3);let h=e[f];return h;},d(a,b);}function getSmartRegionSelection(e,f){const H=F;if(!enableRegionMatching||!e)return f;const g=getAllRegionsByPriority(e),h=[];for(const i of g){const j=f['filter'](k=>k[H(0x16a)]===i);h[H(0x15d)](...j);}return h;}async function getBestBackupIP(e=''){const I=F;if(backupIPs['length']===0x1681*-0x1+-0x13*-0x125+0xc2)return null;const f=backupIPs['map'](g=>({...g,'available':!![]}));if(enableRegionMatching&&e){const g=getSmartRegionSelection(e,f);if(g[I(0x11f)]>-0xb2f*-0x1+0x9e1*0x1+-0x1510)return g[-0xa57+-0x1a67+-0x24be*-0x1];}return f[-0x1e89+0x5f2+0x5*0x4eb];}export default{async 'fetch'(e,f,g){const J=F;try{const h=new URL(e[J(0x148)]);manualWorkerRegion&&manualWorkerRegion[J(0x167)]()?currentWorkerRegion=manualWorkerRegion[J(0x167)]()[J(0x113)]():currentWorkerRegion=await detectWorkerRegion(e);let i=fallbackAddress,j=fallbackPort;if(!i&&currentWorkerRegion){const k=await getBestBackupIP(currentWorkerRegion);k&&(i=k['domain'],j=k[J(0x119)][J(0x16d)]());}if(e['headers']['get'](J(0x175))===J(0x153))return await handleWsRequest(e,i,j);else{if(e[J(0x108)]===J(0x152)){if(h[J(0x163)]==='/'){const l='<!DOCTYPE\x20html><html\x20lang=\x22zh-CN\x22><head><meta\x20charset=\x22UTF-8\x22><meta\x20name=\x22viewport\x22\x20content=\x22width=device-width,\x20initial-scale=1.0\x22><title>可以了</title><style>body{font-family:-apple-system,BlinkMacSystemFont,\x27Segoe\x20UI\x27,Roboto,Helvetica,Arial,sans-serif;display:flex;justify-content:center;align-items:center;height:100vh;margin:0;background-color:#121212;color:#e0e0e0;text-align:center;}.container{padding:2rem;border-radius:8px;background-color:#1e1e1e;box-shadow:0\x204px\x206px\x20rgba(0,0,0,0.1);}h1{color:#4caf50;}</style></head><body><div\x20class=\x22container\x22><h1>✅\x20可以了</h1><p>www.x-aniu.com</p></div></body></html>';return new Response(l,{'status':0xc8,'headers':{'Content-Type':J(0x182)}});}if(customPath&&customPath[J(0x167)]()){const m=customPath[J(0x167)]()[J(0x13d)]('/')?customPath[J(0x167)]():'/'+customPath[J(0x167)](),n=m[J(0x128)]('/')&&m['length']>-0x225e+0x48*0x4b+0xd47*0x1?m[J(0x181)](0x1ef7+0x6*-0x67d+0x7f7,-(0x4fa+0x690+0x1*-0xb89)):m,o=h[J(0x163)][J(0x128)]('/')&&h[J(0x163)]['length']>-0x1d0e+-0x6b*0x53+0x3fc0?h[J(0x163)][J(0x181)](0x1309*0x2+-0xa33*0x1+-0x1*0x1bdf,-(-0x1e7*-0xd+-0x19a+-0x1720)):h[J(0x163)];if(o===n)return await handleSubscriptionPage(e,authToken);if(o===n+'/sub')return await handleSubscriptionRequest(e,authToken,h);if(h[J(0x163)][J(0x11f)]>-0x3cf+0x2186+-0xedb*0x2&&h[J(0x163)]!=='/'){const p=h[J(0x163)]['replace'](/\/$/,'')[J(0x17b)](J(0x178),'')['substring'](0x231b+-0x1*-0xc76+-0x2f90);if(isValidFormat(p))return new Response(JSON[J(0x110)]({'error':J(0x160),'message':J(0x107)}),{'status':0x193,'headers':{'Content-Type':J(0x17c)}});}}else{if(h[J(0x163)][J(0x11f)]>0xf7*0x1b+0x1f71*0x1+-0x397d*0x1&&h[J(0x163)]!=='/'&&!h[J(0x163)][J(0x154)](J(0x178))){const q=h[J(0x163)][J(0x17b)](/\/$/,'')[J(0x121)](-0xe4a+0x26c6+-0x187b);if(isValidFormat(q))return q===authToken?await handleSubscriptionPage(e,q):new Response(J(0x13b),{'status':0x193});}if(h[J(0x163)]['includes'](J(0x178))){const r=h[J(0x163)]['split']('/');if(r[J(0x11f)]===0x28c+-0xddb+0xb51*0x1&&r[-0x1738+-0x1dc5+0x34fe]==='sub'){const s=r[0x3*0x71d+-0x1f96+0xa3f][J(0x121)](-0x19ef+-0xa86+-0x2*-0x123b);if(isValidFormat(s))return s===authToken?await handleSubscriptionRequest(e,s,h):new Response(J(0x13b),{'status':0x193});}}if(h[J(0x163)]['toLowerCase']()[J(0x154)]('/'+authToken))return await handleSubscriptionRequest(e,authToken);}}}return new Response(J(0x17a),{'status':0x194});}catch(t){return new Response(t[J(0x16d)](),{'status':0x1f4});}}};async function handleSubscriptionPage(e,f=null){const K=F;if(!f)f=authToken;const g='<!DOCTYPE\x20html>\x0a<html\x20lang=\x22zh-CN\x22>\x0a<head>\x0a<meta\x20charset=\x22UTF-8\x22>\x0a<meta\x20name=\x22viewport\x22\x20content=\x22width=device-width,\x20initial-scale=1.0\x22>\x0a<title>订阅中心</title>\x0a<style>\x0a*{margin:0;padding:0;box-sizing:border-box}\x0abody{font-family:\x22Courier\x20New\x22,monospace;background:#000;color:#00ff00;min-height:100vh;overflow-x:hidden;position:relative}\x0a.matrix-bg{position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(45deg,#000\x200%,#001100\x2050%,#000\x20100%);z-index:-1}\x0a.matrix-rain{position:fixed;top:0;left:0;width:100%;height:100%;background:repeating-linear-gradient(0deg,transparent,transparent\x202px,rgba(0,255,0,0.03)\x202px,rgba(0,255,0,0.03)\x204px);animation:matrix-fall\x2020s\x20linear\x20infinite;z-index:-1}\x0a@keyframes\x20matrix-fall{0%{transform:translateY(-100%)}100%{transform:translateY(100vh)}}\x0a.container{max-width:900px;margin:0\x20auto;padding:20px;position:relative;z-index:1}\x0a.header{text-align:center;margin-bottom:40px}\x0a.title{font-size:3rem;font-weight:bold;text-shadow:0\x200\x2010px\x20#00ff00,0\x200\x2020px\x20#00ff00,0\x200\x2030px\x20#00ff00;margin-bottom:10px;animation:matrix-glow\x202s\x20ease-in-out\x20infinite\x20alternate}\x0a@keyframes\x20matrix-glow{from{text-shadow:0\x200\x2010px\x20#00ff00,0\x200\x2020px\x20#00ff00,0\x200\x2030px\x20#00ff00}to{text-shadow:0\x200\x2020px\x20#00ff00,0\x200\x2030px\x20#00ff00,0\x200\x2040px\x20#00ff00}}\x0a.subtitle{color:#00aa00;margin-bottom:30px;font-size:1.2rem}\x0a.card{background:rgba(0,20,0,0.8);border:2px\x20solid\x20#00ff00;border-radius:0;padding:30px;margin-bottom:20px;box-shadow:0\x200\x2020px\x20rgba(0,255,0,0.3);position:relative}\x0a.card::before{content:\x22\x22;position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(45deg,transparent\x2049%,#00ff00\x2050%,transparent\x2051%);opacity:0.1;pointer-events:none}\x0a.card-title{font-size:1.8rem;margin-bottom:20px;color:#00ff00;text-shadow:0\x200\x205px\x20#00ff00}\x0a.client-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:15px;margin:20px\x200}\x0a.client-btn{background:rgba(0,20,0,0.6);border:2px\x20solid\x20#00ff00;padding:15px\x2020px;color:#00ff00;font-family:\x22Courier\x20New\x22,monospace;font-weight:bold;cursor:pointer;transition:all\x200.3s\x20ease;text-align:center;position:relative;overflow:hidden}\x0a.client-btn::before{content:\x22\x22;position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(0,255,0,0.3),transparent);transition:left\x200.5s\x20ease}\x0a.client-btn:hover::before{left:100%}\x0a.client-btn:hover{background:rgba(0,255,0,0.2);box-shadow:0\x200\x2015px\x20#00ff00;transform:translateY(-2px)}\x0a.generate-btn{background:rgba(0,255,0,0.1);border:2px\x20solid\x20#00ff00;padding:15px\x2030px;color:#00ff00;font-family:\x22Courier\x20New\x22,monospace;font-weight:bold;cursor:pointer;transition:all\x200.3s\x20ease;margin-right:15px}\x0a.generate-btn:hover{background:rgba(0,255,0,0.3);box-shadow:0\x200\x2020px\x20#00ff00;transform:translateY(-2px)}\x0a.subscription-url{background:rgba(0,0,0,0.8);border:1px\x20solid\x20#00ff00;padding:15px;word-break:break-all;font-family:\x22Courier\x20New\x22,monospace;color:#00ff00;margin-top:20px;display:none;box-shadow:inset\x200\x200\x2010px\x20rgba(0,255,0,0.3)}\x0a.matrix-text{position:fixed;top:20px;right:20px;color:#00ff00;font-family:\x22Courier\x20New\x22,monospace;font-size:0.8rem;opacity:0.6;animation:matrix-flicker\x203s\x20infinite}\x0a@keyframes\x20matrix-flicker{0%,100%{opacity:0.6}50%{opacity:1}}\x0a</style>\x0a</head>\x0a<body>\x0a<div\x20class=\x22matrix-bg\x22></div>\x0a<div\x20class=\x22matrix-rain\x22></div>\x0a<div\x20class=\x22matrix-text\x22>代理订阅中心精简版\x20v2.1</div>\x0a<div\x20class=\x22container\x22>\x0a<div\x20class=\x22header\x22>\x0a<h1\x20class=\x22title\x22>代理订阅中心</h1>\x0a<p\x20class=\x22subtitle\x22>多客户端支持\x20•\x20智能优选\x20•\x20一键生成</p>\x0a</div>\x0a<div\x20class=\x22card\x22>\x0a<h2\x20class=\x22card-title\x22>[\x20选择客户端\x20]</h2>\x0a<div\x20class=\x22client-grid\x22>\x0a<button\x20class=\x22client-btn\x22\x20onclick=\x22generateClientLink(\x27clash\x27,\x27CLASH\x27)\x22>CLASH</button>\x0a<button\x20class=\x22client-btn\x22\x20onclick=\x22generateClientLink(\x27surge\x27,\x27SURGE\x27)\x22>SURGE</button>\x0a<button\x20class=\x22client-btn\x22\x20onclick=\x22generateClientLink(\x27singbox\x27,\x27SING-BOX\x27)\x22>SING-BOX</button>\x0a<button\x20class=\x22client-btn\x22\x20onclick=\x22generateClientLink(\x27loon\x27,\x27LOON\x27)\x22>LOON</button>\x0a<button\x20class=\x22client-btn\x22\x20onclick=\x22generateClientLink(\x27quanx\x27,\x27QUANTUMULT\x20X\x27)\x22>QUANTUMULT\x20X</button>\x0a<button\x20class=\x22client-btn\x22\x20onclick=\x22generateClientLink(\x27v2ray\x27,\x27V2RAY\x27)\x22>V2RAY</button>\x0a<button\x20class=\x22client-btn\x22\x20onclick=\x22generateClientLink(\x27v2ray\x27,\x27Shadowrocket\x27)\x22>Shadowrocket</button>\x0a<button\x20class=\x22client-btn\x22\x20onclick=\x22generateClientLink(\x27v2ray\x27,\x27V2RAYNG\x27)\x22>V2RAYNG</button>\x0a<button\x20class=\x22client-btn\x22\x20onclick=\x22generateClientLink(\x27v2ray\x27,\x27NEKORAY\x27)\x22>NEKORAY</button>\x0a<button\x20class=\x22client-btn\x22\x20onclick=\x22generateClientLink(\x27clash\x27,\x27STASH\x27)\x22>STASH</button>\x0a</div>\x0a<div\x20class=\x22subscription-url\x22\x20id=\x22clientSubscriptionUrl\x22></div>\x0a</div>\x0a<div\x20class=\x22card\x22>\x0a<h2\x20class=\x22card-title\x22>[\x20快速获取\x20]</h2>\x0a<button\x20class=\x22generate-btn\x22\x20onclick=\x22getBase64Subscription()\x22>获取订阅链接</button>\x0a<div\x20class=\x22subscription-url\x22\x20id=\x22base64SubscriptionUrl\x22></div>\x0a</div>\x0a<div\x20class=\x22card\x22>\x0a<h2\x20class=\x22card-title\x22>[\x20相关链接\x20]</h2>\x0a<div\x20style=\x22text-align:center;margin:20px\x200\x22>\x0a<a\x20href=\x22https://github.com/byJoey/cfnew\x22\x20target=\x22_blank\x22\x20style=\x22color:#00ff00;text-decoration:none;margin:0\x2020px;font-size:1.2rem;text-shadow:0\x200\x205px\x20#00ff00\x22>GitHub\x20项目</a>\x0a<a\x20href=\x22https://www.youtube.com/@joeyblog\x22\x20target=\x22_blank\x22\x20style=\x22color:#00ff00;text-decoration:none;margin:0\x2020px;font-size:1.2rem;text-shadow:0\x200\x205px\x20#00ff00\x22>YouTube\x20@joeyblog</a>\x0a</div>\x0a</div>\x0a</div>\x0a<script>\x0a\x09var\x20SUB_CONVERTER_URL=\x22'+apiBaseUrl+K(0x10a);return new Response(g,{'status':0xc8,'headers':{'Content-Type':K(0x182)}});}async function handleSubscriptionRequest(e,f,g=null){const L=F;if(!g)g=new URL(e[L(0x148)]);const h=[],i=g['hostname'],j=[{'ip':i,'isp':L(0x10d)}];h[L(0x15d)](...generateLinksFromSource(j,f,i));if(enableOtherPreferred){const l=directDomains[L(0x150)](m=>({'ip':m[L(0x151)],'isp':m[L(0x124)]||m['domain']}));h[L(0x15d)](...generateLinksFromSource(l,f,i));}if(enableGitHubPreferred){const m=await fetchAndParseNewIPs();m[L(0x11f)]>0x7*0x9a+0xf*0xb+-0x4db&&h[L(0x15d)](...generateLinksFromNewIPs(m,f,i));}if(h[L(0x11f)]===0x1*0x1674+0x23a2*0x1+-0x3a16){const n='所有节点获取失败',o=L(0x168)+encodeURIComponent(n);h[L(0x15d)](o);}const k=btoa(h[L(0x161)]('\x0a'));return new Response(k,{'headers':{'Content-Type':L(0x176),'Cache-Control':L(0x129)}});}function generateLinksFromSource(e,f,g){const M=F,h=[-0xb29+0x1dfa+-0x9*0x1e6],i=[],j=M(0x144),k='vless';return e[M(0x158)](l=>{const N=M,m=l[N(0x14a)]['replace'](/\s/g,'_'),n=l['ip'][N(0x154)](':')?'['+l['ip']+']':l['ip'];h[N(0x158)](o=>{const O=N,p=m+'-'+o+O(0x14c),q=new URLSearchParams({'encryption':'none','security':O(0x173),'sni':g,'fp':O(0x13e),'type':'ws','host':g,'path':j});i[O(0x15d)](k+O(0x174)+f+'@'+n+':'+o+'?'+q['toString']()+'#'+encodeURIComponent(p));});}),i;}async function fetchAndParseNewIPs(){const P=F,e=githubPreferredURL;try{const f=await fetch(e);if(!f['ok'])return[];const g=await f['text'](),h=[],i=g[P(0x167)]()[P(0x17b)](/\r/g,'')[P(0x134)]('\x0a'),j=/^([^:]+):(\d+)#(.*)$/;for(const k of i){const l=k[P(0x167)]();if(!l)continue;const m=l[P(0x12b)](j);m&&h[P(0x15d)]({'ip':m[-0x2380+0x1*-0x1f3c+0x42bd],'port':parseInt(m[0xf34+0x590+-0x14c2*0x1],0x1*0x13f1+-0x1*0x1a3b+0x654),'name':m[-0x21e9+-0xe15*0x1+0x3001][P(0x167)]()||m[0x58e+0x1*-0x12c4+0xd37]});}return h;}catch(n){return[];}}function generateLinksFromNewIPs(e,f,g){const Q=F,h=[],i=Q(0x144),j='vless';return e[Q(0x158)](k=>{const R=Q,l=k['name'],m=k['ip'][R(0x154)](':')?'['+k['ip']+']':k['ip'],n={'encryption':'none','security':R(0x173),'sni':g,'fp':R(0x13e),'type':'ws','host':g,'path':i},o=new URLSearchParams(n);h['push'](j+'://'+f+'@'+m+':'+k['port']+'?'+o[R(0x16d)]()+'#'+encodeURIComponent(l));}),h;}async function handleWsRequest(e,f=null,g=null){const S=F,h=new WebSocketPair(),[i,j]=Object[S(0x12e)](h);j[S(0x180)]();let k={'socket':null},l=![];const m=f||fallbackAddress,n=g||fallbackPort,o=e[S(0x120)][S(0x15f)](S(0x132))||'',p=makeReadableStream(j,o);return p[S(0x10b)](new WritableStream({async 'write'(q){const T=S;if(l)return await forwardUDP(q,j,null);if(k['socket']){const B=k['socket'][T(0x11b)][T(0x147)]();await B[T(0x10e)](q),B[T(0x17f)]();return;}const {hasError:r,message:s,addressType:t,port:u,hostname:v,rawIndex:w,version:x,isUDP:y}=parseWsPacketHeader(q,authToken);if(r)throw new Error(s);if(y){if(u===-0x665*-0x5+-0x3d5+-0x1bef)l=!![];else throw new Error(E_UDP_DNS_ONLY);}const z=new Uint8Array([x[0x1a5e+0xd5e+-0x13de*0x2],0x408+0x207*0x1+-0x60f]),A=q[T(0x181)](w);if(l)return forwardUDP(A,j,z);await forwardTCP(t,v,u,A,j,z,k,m,n);}}))['catch'](q=>{const U=S;console[U(0x137)](U(0x16e),q);}),new Response(null,{'status':0x65,'webSocket':i});}async function forwardTCP(e,f,g,h,i,j,k,l=null,m=null){const X=F,n=l||fallbackAddress,o=m||fallbackPort;async function p(r,s){const V=d,t=connect({'hostname':r,'port':s}),u=t[V(0x11b)]['getWriter']();return await u[V(0x10e)](h),u[V(0x17f)](),t;}async function q(){const W=d,r=await p(n||f,parseInt(o,0x1b74+0x1c0d*0x1+-0x3777)||g);k[W(0x115)]=r,r[W(0x165)][W(0x143)](()=>{})[W(0x156)](()=>closeSocketQuietly(i)),connectStreams(r,i,j,null);}try{const r=await p(f,g);k[X(0x115)]=r,connectStreams(r,i,j,q);}catch(s){console[X(0x137)](X(0x16b),s),q();}}function parseWsPacketHeader(e,f){const Y=F;if(e[Y(0x170)]<-0xfa1+-0x170d*-0x1+-0x754)return{'hasError':!![],'message':E_INVALID_DATA};const g=new Uint8Array(e[Y(0x181)](-0x4b*-0x1d+0x10f*0x1c+-0x2623,0x1*0x1f9d+0x21a4+0x48*-0xe8));if(formatIdentifier(new Uint8Array(e['slice'](0x399*0x6+-0x8*0x2b6+0x1b,-0x1183+0x168*0x3+-0xc*-0x11d)))!==f)return{'hasError':!![],'message':E_INVALID_USER};const h=new Uint8Array(e[Y(0x181)](-0x1*0xc26+0x1438+0x3*-0x2ab,-0xa0*0x3a+-0x4*-0xc9+0x212e))[-0x1*-0x1e01+0xd*0x155+-0x2f52],j=new Uint8Array(e[Y(0x181)](0x269*0x6+0x1*-0x1771+0x90d+h,-0x19d6+-0x2289+0x1426*0x3+h))[0x26f+0x3*0x3fa+-0xe5d];let k=![];if(j===-0x1aa*0x3+0x65*0x1b+-0x1*0x5a8){}else{if(j===0x4*-0x8ee+0xad0+-0x3*-0x84e)k=!![];else return{'hasError':!![],'message':E_UNSUPPORTED_CMD};}const l=-0x4d*0x3a+0xfa+0x108b+h,m=new DataView(e[Y(0x181)](l,l+(-0x7c4+-0x19af*-0x1+-0x11e9)))[Y(0x106)](0x2293*-0x1+0x1*-0x1ba7+0x3e3a);let n=l+(0x2528+-0x1f3*0xd+0xbcf*-0x1),o=0x281*0x5+0x13be+-0x2043*0x1,p=n+(-0x1451+-0xa11+-0x3*-0xa21),q='';const r=new Uint8Array(e[Y(0x181)](n,p))[-0x8c0+0x167a+-0x7*0x1f6];switch(r){case ADDRESS_TYPE_IPV4:o=0x1baf+0x2165+-0x3d10,q=new Uint8Array(e[Y(0x181)](p,p+o))[Y(0x161)]('.');break;case ADDRESS_TYPE_URL:o=new Uint8Array(e[Y(0x181)](p,p+(-0x647+0x2*0xc5f+-0x1276)))[0x1e6b+-0x12fd+0xd1*-0xe],p+=-0x2*-0xfef+0x1329+0x1*-0x3306,q=new TextDecoder()[Y(0x136)](e[Y(0x181)](p,p+o));break;case ADDRESS_TYPE_IPV6:o=0x4da+-0x3*-0xc7f+-0x2a47;const s=[],t=new DataView(e[Y(0x181)](p,p+o));for(let u=-0xe47+-0x4fc+0x1343*0x1;u<0x4*-0x4f6+-0xd0a*0x1+0x20ea;u++)s[Y(0x15d)](t[Y(0x106)](u*(0x1*-0x2209+0xb*0x2b7+0x42e))[Y(0x16d)](-0x16c0+0x8ac+-0x5*-0x2d4));q=s[Y(0x161)](':');break;default:return{'hasError':!![],'message':E_INVALID_ADDR_TYPE+':\x20'+r};}if(!q)return{'hasError':!![],'message':E_EMPTY_ADDR+':\x20'+r};return{'hasError':![],'addressType':r,'port':m,'hostname':q,'isUDP':k,'rawIndex':p+o,'version':g};}function makeReadableStream(e,f){let g=![];return new ReadableStream({'start'(h){const Z=d;e[Z(0x10c)](Z(0x118),k=>{const a0=Z;if(!g)h['enqueue'](k[a0(0x140)]);}),e['addEventListener'](Z(0x16f),()=>{!g&&(closeSocketQuietly(e),h['close']());}),e['addEventListener'](Z(0x162),k=>h[Z(0x162)](k));const {earlyData:i,error:j}=base64ToArray(f);if(j)h['error'](j);else{if(i)h[Z(0x12d)](i);}},'cancel'(){g=!![],closeSocketQuietly(e);}});}async function connectStreams(e,f,g,h){const a3=F;let i=g,j=![];await e['readable']['pipeTo'](new WritableStream({async 'write'(k,l){const a1=d;j=!![];if(f[a1(0x131)]!==-0x1*-0x1d96+-0x156b+0x2*-0x415)l[a1(0x162)](E_WS_NOT_OPEN);i?(f[a1(0x16c)](await new Blob([i,k])[a1(0x172)]()),i=null):f[a1(0x16c)](k);},'abort'(k){const a2=d;console['error'](a2(0x14e),k);}}))[a3(0x143)](k=>{const a4=a3;console[a4(0x162)](a4(0x149),k),closeSocketQuietly(f);});if(!j&&h)h();}async function forwardUDP(e,f,g){const a5=F;try{const h=connect({'hostname':a5(0x116),'port':0x35});let i=g;const j=h[a5(0x11b)]['getWriter']();await j[a5(0x10e)](e),j[a5(0x17f)](),await h['readable'][a5(0x10b)](new WritableStream({async 'write'(k){const a6=a5;f[a6(0x131)]===0x800+-0xf81+0x782&&(i?(f[a6(0x16c)](await new Blob([i,k])[a6(0x172)]()),i=null):f[a6(0x16c)](k));}}));}catch(k){console['error']('DNS\x20forward\x20error:\x20'+k['message']);}}function base64ToArray(e){const a7=F;if(!e)return{'error':null};try{return e=e[a7(0x17b)](/-/g,'+')[a7(0x17b)](/_/g,'/'),{'earlyData':Uint8Array[a7(0x11d)](atob(e),f=>f[a7(0x10f)](0x1c*-0x4a+-0x124+-0x93c*-0x1))[a7(0x145)],'error':null};}catch(f){return{'error':f};}}function isValidFormat(e){const a8=F;return/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i[a8(0x14b)](e);}function closeSocketQuietly(e){const a9=F;try{if(e[a9(0x131)]===0x5a6+0x16ae+-0x1*0x1c53||e[a9(0x131)]===0x1c51+-0x122e+-0xa21)e[a9(0x16f)]();}catch(f){}}const hexTable=Array['from']({'length':0x100},(e,f)=>(f+(0x1*0xfae+-0x1*-0x1d49+-0x8cb*0x5))[F(0x16d)](-0x181*-0x19+0x1b7*-0xa+-0x1463)[F(0x181)](0xa4+0xce1+-0xd84));function formatIdentifier(e,f=-0x214f+0x521+0x1c2e*0x1){const aa=F,g=(hexTable[e[f]]+hexTable[e[f+(-0x23e3+0x183c+-0x4*-0x2ea)]]+hexTable[e[f+(0x1f1f+-0x20a+-0x33b*0x9)]]+hexTable[e[f+(-0x1*0x281+0x147a+-0x8fb*0x2)]]+'-'+hexTable[e[f+(-0x18e9*-0x1+-0x1ad1+0x29*0xc)]]+hexTable[e[f+(-0x1d58+-0x43*-0x66+0x2ab)]]+'-'+hexTable[e[f+(0xc7+-0x1d*0xb9+0x1434)]]+hexTable[e[f+(-0x1395*0x1+-0x3cd+0x1769)]]+'-'+hexTable[e[f+(-0x3a*-0x13+-0x2532+-0xe*-0x25a)]]+hexTable[e[f+(0x9*0x247+0x1*-0x1d61+-0x8eb*-0x1)]]+'-'+hexTable[e[f+(-0x8b*0x20+-0x6*0xc8+-0x52*-0x45)]]+hexTable[e[f+(-0x7a+-0xb18+-0x3df*-0x3)]]+hexTable[e[f+(-0x2656+-0x1e4e*-0x1+0x814)]]+hexTable[e[f+(-0x1c14+-0x18e*0x17+0x3fe3)]]+hexTable[e[f+(-0x365+0x362+0x1*0x11)]]+hexTable[e[f+(0x5c*-0x51+0x1f*0xe5+-0x4*-0x5c)]])[aa(0x11c)]();if(!isValidFormat(g))throw new TypeError(E_INVALID_ID_STR);return g;}